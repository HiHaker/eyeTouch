(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c099e584"],{4565:function(e,s,r){"use strict";var t=r("c6df"),o=r.n(t);o.a},c6df:function(e,s,r){},d5c2:function(e,s,r){"use strict";r.r(s);var t=function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",{attrs:{id:"register"}},[r("div",{staticClass:"master"},[r("div",{staticClass:"loginbox"},[r("div",{staticClass:"form"},[r("div",{staticClass:"title"},[e._v("\n          注册\n        ")]),r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"70px","label-position":"left",size:"small"}},[r("el-form-item",{attrs:{label:"邮箱",prop:"username"}},[r("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.ruleForm.username,callback:function(s){e.$set(e.ruleForm,"username",s)},expression:"ruleForm.username"}})],1),r("el-form-item",{attrs:{label:"验证码",prop:"nickname"}},[r("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.ruleForm.nickname,callback:function(s){e.$set(e.ruleForm,"nickname",s)},expression:"ruleForm.nickname"}},[r("el-button",{attrs:{slot:"append"},slot:"append"},[e._v("获取验证码")])],1)],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.password,callback:function(s){e.$set(e.ruleForm,"password",s)},expression:"ruleForm.password"}})],1),r("el-form-item",{attrs:{label:"确认密码",prop:"checkPassword"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.checkPassword,callback:function(s){e.$set(e.ruleForm,"checkPassword",s)},expression:"ruleForm.checkPassword"}})],1)],1),r("div",{staticClass:"operate"},[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.register}},[e._v("提交")]),r("el-button",{attrs:{size:"small"},on:{click:function(s){return e.resetForm("ruleForm")}}},[e._v("重置")]),r("div",{staticClass:"tip"},[r("div",{staticClass:"words"},[e._v("\n              已经有账号？去\n              "),r("span",{staticClass:"link",on:{click:e.toLogin}},[e._v("登录")])])])],1),r("i",{staticClass:"el-icon-close",on:{click:e.sendUnRegister}})],1),r("div",{staticClass:"info"})])])])},o=[],n={name:"register",data:function(){var e=this,s=function(e,s,r){if(""===s)return r(new Error("请输入用户名"))},r=function(e,s,r){if(""===s)return r(new Error("请输入昵称"))},t=function(s,r,t){""===r?t(new Error("请输入密码")):(""!==e.ruleForm.checkPassword&&e.$refs.ruleForm.validateField("checkPass"),t())},o=function(s,r,t){""===r?t(new Error("请再次输入密码")):r!==e.ruleForm.password?t(new Error("两次密码输入不一致!")):t()};return{msg:!1,toLoginInfo:{isMask:!0,isLogin:!0,isRegister:!1},ruleForm:{username:"",password:"",checkPassword:"",nickname:"",create_time:""},rules:{username:[{validator:s,trigger:"blur"}],password:[{validator:t,trigger:"blur"}],checkPassword:[{validator:o,trigger:"blur"}],nickname:[{validator:r,trigger:"blur"}]}}},methods:{resetForm:function(e){this.$refs[e].resetFields()},sendUnRegister:function(){this.$router.go(-1)},toLogin:function(){this.$router.push({name:"Login"})},sendRegisterInfo:function(){this.$emit("registerInfo",this.$store.state.userInfo)},registerSuccess:function(){this.$message({message:"注册成功",type:"success"})},loginSuccess:function(){this.$message({message:"自动登录成功",type:"success"})},fail:function(){this.$message({message:"注册失败, 该用户名已存在",type:"error"})},error:function(){this.$message({message:"注册失败",type:"error"})},register:function(){if(""!=this.ruleForm.username&&""!=this.ruleForm.password&&""!=this.ruleForm.checkPassword&&""!=this.ruleForm.nickname){var e=this;e.ruleForm.create_time=getDate(),signup(e.ruleForm).then(function(s){console.log(s),e.$store.dispatch("getUserInfo",s.data.user),console.log(e.$store.state.userInfo),0===s.data.code?(e.registerSuccess(),setTimeout(function(){e.loginSuccess(),e.sendRegisterInfo(),e.sendUnRegister()},1e3)):e.fail()}).catch(function(){e.error()})}else this.$refs.ruleForm.validate()}},components:{},beforeMount:function(){}},i=n,a=(r("4565"),r("2877")),l=Object(a["a"])(i,t,o,!1,null,null,null);s["default"]=l.exports}}]);